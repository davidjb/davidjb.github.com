<!DOCTYPE html>
<html lang="en">
<head>
        <title>DavidJB.com - jenkins</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="../theme/css/main.css" type="text/css" />
                <link href="http://davidjb.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="DavidJB.com Atom Feed" />
                
        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../css/ie.css"/>
                <script src="../js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="../">DavidJB.com  <strong>Ramblings about Plone, Pyramid, Python, the web, Linux, roses and more.</strong></a></h1>
                <nav><ul>
                                                    <li><a href="../pages/about-me.html">About me</a></li>
                                    <li><a href="../pages/blog.html">Blog</a></li>
                                    <li><a href="../pages/projects.html">Projects</a></li>
                                                                </ul></nav>
        </header><!-- /#banner -->
                
            

                            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="../blog/2012/06/easier-github-organisation-repository-and-team-management-with-github-collective/">Easier GitHub organisation, repository and team management with github-collective</a></h1> 
                    <footer class="post-info">
        <abbr class="published" title="2012-06-22T12:17:00">
                Fri 22 June 2012
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="../author/davidjb.html">davidjb</a>
        </address>
        <p>In <a href="../category/it.html">IT</a>. </p>
<p>tags: <a href="../tag/collective.html">collective</a><a href="../tag/github.html">github</a><a href="../tag/ini.html">ini</a><a href="../tag/jenkins.html">jenkins</a><a href="../tag/management.html">management</a><a href="../tag/organization.html">organization</a><a href="../tag/plone.html">plone</a><a href="../tag/script.html">script</a></p>
</footer><!-- /.post-info --><p>Have you ever felt that administering your GitHub organisation (or
organization, depending from where you hail), its repositories, teams,
and service hooks has become a tedious task and that you'd rather be
doing something else? &nbsp;Maybe you're of the mindset that there should be
a better way of doing things - a way that involves specific,
version-controlled configuration and less repetition (less
clicky-clicky). &nbsp;The good news is that there is -- <a class="reference external" href="http://pypi.python.org/pypi/github-collective">github-collective</a>!</p>
<p>This is a script, written in Python, that utilises <a class="reference external" href="http://developer.github.com/">GitHub's JSON-based
API</a> to allow you to construct an ini-style text-based configuration
representing your GitHub organisation and have this sync to create
repositories and service hooks for said repositories, teams, and
configure access rights. &nbsp;At present, this works <em>from</em> your
configuration <em>to</em> GitHub (not vice versa at present). You may already
know this as what's powering the <a class="reference external" href="http://git.io/collective">GitHub Collective</a> to manage
repositories and teams, especially if you're in the Plone community.</p>
<p>An <a class="reference external" href="https://github.com/collective/github-collective/blob/master/example.cfg">example configuration</a> lives within its source code repository, and
similarly, the configuration that <a class="reference external" href="https://github.com/collective/collective.github.com/blob/master/permissions.cfg">powers the Collective</a> is available
also. Effectively, you define different types of sections ([team],
[hook], [repo]) and these will correspond to certain things being
created on GitHub via the API.</p>
<div class="section" id="our-implementation">
<h2>Our implementation</h2>
<p>We at the James Cook University <a class="reference external" href="http://eresearch.jcu.edu.au">eResearch Centre</a>&nbsp;have deployed this
for use against our <a class="reference external" href="http://git.io/jcu">GitHub organisation</a>&nbsp;and our workflow looks like
this:</p>
<ol class="arabic simple">
<li>Users are able to fork a configuration repository and modify
accordingly. For simplicity, since changes are frequently minor, I
suggest using GitHub's &quot;Edit this file&quot; feature via the web.</li>
<li>User creates Pull Request for changes.</li>
<li>Administrator reviews and merges changes from Pull Request.</li>
<li>Configuration repository's service hook sends POST to Jenkins CI
instance</li>
<li>Jenkins CI instance runs the <em>github-collective</em> script upon
receiving this hook.</li>
<li>Changes to configuration get enacted on GitHub.</li>
</ol>
<p>This process is similar to what happens for the Collective, except that
our service hook and Jenkins take care of making the changes happen,
rather than a periodical cron job.</p>
<p>Our Jenkins job uses the&nbsp;<a class="reference external" href="https://wiki.jenkins-ci.org/display/JENKINS/Text-finder+Plugin">Jenkins Text Finder</a>&nbsp;plugin to search for
the regex &quot;Traceback \(most recent call last\)&quot; in the output to
determine success or failure. &nbsp;This isn't the most elegant solution in
the world, but it's good enough for now.</p>
<p>For what it's worth, we have a total of 25 repositories; a similar
number of teams; give or take 12 staff members in total; and the end
result is that running <em>github-collective</em> once cached takes only around
6 seconds, including Jenkins overhead. &nbsp;Unfortunately I'm unable to
provide our exact configuration, but for everything we do, I've
'anonymised' the configuration and included it back in the public
repository as examples. Happy to answer questions about what we're doing
too!</p>
</div>
<div class="section" id="thanks">
<h2>Thanks</h2>
<p>All credit to Rok Garbas and Alex Clark for their work on this - it
works fantastically. I can only take credit for coming in later with a
few things necessary our deployment. <em>Github-collective</em> now supports
all GitHub API settings for repositories (thus allowing you to create
private repos - something critical for us, and set other metadata) and
post-receive service hooks (so you can easily manage hooks on GitHub).
That, and a hearty dose of end-user documentation.</p>
</div>
<p>There are <a href="../blog/2012/06/easier-github-organisation-repository-and-team-management-with-github-collective/#disqus_thread">comments</a>.</p>                </article>
                            </aside><!-- /#featured -->
                            <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">
                                                

                 
                        <li><article class="hentry">    
                <header>
                    <h1><a href="../blog/2012/06/jenkins-ci-and-github-post-receive-hooks-ceasing-to-work-potential-solution/" rel="bookmark"
                           title="Permalink to Jenkins CI and GitHub post-receive hooks ceasing to work (+ potential solution)">Jenkins CI and GitHub post-receive hooks ceasing to work (+ potential solution)</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2012-06-19T09:11:00">
                Tue 19 June 2012
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="../author/davidjb.html">davidjb</a>
        </address>
        <p>In <a href="../category/github.html">GitHub</a>. </p>
<p>tags: <a href="../tag/ci.html">ci</a><a href="../tag/git.html">git</a><a href="../tag/github.html">github</a><a href="../tag/jenkins.html">jenkins</a></p>
</footer><!-- /.post-info -->                <div class="section" id="all-projects-fail">
<h2>All projects fail</h2>
<p>Recently our Jenkins CI system began having issues with failing to
correctly accept post-receive hook POST requests from GitHub, even
though it was working fine. Without thorough testing, I can only really
see that the issue was related to upgrading Jenkins and/or the relevant
Git and ...</p></div>
                <a class="readmore" href="../blog/2012/06/jenkins-ci-and-github-post-receive-hooks-ceasing-to-work-potential-solution/">read more</a>
                <p>There are <a href="../blog/2012/06/jenkins-ci-and-github-post-receive-hooks-ceasing-to-work-potential-solution/#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
                            </ol><!-- /#posts-list -->
                            <p class="paginator">
        Page 1 / 1
    </p>
                        </section><!-- /#content -->
                    <section id="extras" class="body">
                        <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                                                    <li><a href="http://planet.plone.org">Planet Plone</a></li>
                                                    <li><a href=""></a></li>
                                                    <li><a href=""></a></li>
                                                </ul>
                </div><!-- /.blogroll -->
                                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="http://davidjb.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>
                            
                                                    <li><a href="http://git.io/djb">GitHub</a></li>
                                                    <li><a href="http://twitter.com/davidjb_">Twitter</a></li>
                                                    <li><a href="http://linkedin.com/in/davidbeitey">LinkedIn</a></li>
                                                    <li><a href="http://facebook.com/david.beitey">Facebook</a></li>
                                                    <li><a href="https://plus.google.com/u/0/106527454335411502430">Google+</a></li>
                                                </ul>
                </div><!-- /.social -->
                </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-24253455-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
<script type="text/javascript">
    var disqus_shortname = 'davidjb';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>