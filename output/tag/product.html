<!DOCTYPE html>
<html lang="en">
<head>
        <title>DavidJB.com - product</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="http://davidjb.com/theme/css/main.css" type="text/css" />
                <link href="http://davidjb.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="DavidJB.com Atom Feed" />
                
        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="http://davidjb.com/css/ie.css"/>
                <script src="http://davidjb.com/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="http://davidjb.com/css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="http://davidjb.com/">DavidJB.com  <strong>Ramblings about Plone, Pyramid, Python, the web, Linux, roses and more.</strong></a></h1>
                <nav><ul>
                                                    <li><a href="http://davidjb.com/about.html">About&nbsp;me</a></li>
                                    <li><a href="http://davidjb.com/blog/index.html">Blog</a></li>
                                    <li><a href="http://davidjb.com/projects.html">Projects</a></li>
                                                                </ul></nav>
        </header><!-- /#banner -->
                
            

                            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="http://davidjb.com/blog/2010/06/plone-dexterity-and-incorrect-widgets/">Plone, Dexterity, and Incorrect&nbsp;Widgets</a></h1> 
                    <footer class="post-info">
        <abbr class="published" title="2010-06-21T15:09:00">
                Mon 21 June 2010
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="http://davidjb.com/author/davidjb.html">davidjb</a>
        </address>
        <p>In <a href="http://davidjb.com/category/plone.html">Plone</a>. </p>
<p>tags: <a href="http://davidjb.com/tag/content-type.html">content type</a><a href="http://davidjb.com/tag/datetime.html">datetime</a><a href="http://davidjb.com/tag/dexterity.html">dexterity</a><a href="http://davidjb.com/tag/fields.html">fields</a><a href="http://davidjb.com/tag/form.html">form</a><a href="http://davidjb.com/tag/plone.html">plone</a><a href="http://davidjb.com/tag/problem.html">problem</a><a href="http://davidjb.com/tag/product.html">product</a><a href="http://davidjb.com/tag/zope.html">zope</a></p>
</footer><!-- /.post-info --><p>A nice &#8216;gotcha&#8217; is the distinction between Zope&#8217;s schema.Date and
schema.Datetime. The difference is obvious and straightforward when the
two terms are laid out side-by-side: one is for dates only and the other
adds a time component. Where things fell down for me in my usage of
these fields with a Dexterity-based content type in Plone is the human
component. When these fields are mashed in together within a lot of
other text/Python/names, it&#8217;s easy to miss those 4 little letters of
&#8216;time&#8217;. This lead me trying to use a DatetimeFieldWidget when I really
could only use a DateFieldWidget. <strong>Wrong widget for the wrong type =&nbsp;unpredictable.</strong></p>
<p>When it&#8217;s all laid out like that, things are clear and simple. When the
small typo has been made, however, things are far less forgiving and
informative. Thankfully, the typo wasn&#8217;t my fault, but was caused by a
ZopeSkel template for Dexterity (<a class="reference external" href="http://pypi.python.org/pypi/zopeskel.dexterity">zopeskel.dexterity</a>) so I&#8217;m not
kicking myself over it. Essentially, the error message (for those of you
possibly experiencing something similar) is like&nbsp;this:</p>
<pre class="code pytb literal-block">
<span class="x">2010-06-18 16:32:03 <span class="caps">ERROR</span> Zope.SiteErrorLog 1276842723.120.730292360531 http://localhost:8080/test/kss_z3cform_inline_validation/validate_input
    Traceback (innermost last):
    Module ZPublisher.Publish, line 119, in publish
    Module ZPublisher.mapply, line 88, in mapply
    Module ZPublisher.Publish, line 42, in call_object
    Module &lt;wrapper&gt;, line 5, in wrapper
    Module kss.core.actionwrapper, line 238, in apply
    Module plone.app.z3cform.kss.validation, line 48, in validate_input
    Module z3c.form.group, line 92, in extractData
    Module z3c.form.form, line 143, in extractData
    Module z3c.form.field, line 302, in extract
    Module z3c.form.converter, line 164, in toFieldValue
    Module zope.i18n.format, line 79, in parse
    Module sre, line 129, in match
    TypeError: expected string or buffer</span>
</pre>
<p>And the end result of this is that you can&#8217;t validate fields in your
Dexterity content Add form (eg the above traceback is echoed whenever
you click in/out of a field), nor can you actually save your content.
Unfortunately, even if you were to go hunting through the traceback,
you&#8217;d probably end up like me and find that the code is trying to
validate a completely different field than the problematic one. No help&nbsp;whatsoever.</p>
<p>After going through each of the different fields I had on my content
type, I figured out the cause. If you&#8217;re hitting a similar issue, check
your widgets. If you&#8217;re using <a class="reference external" href="http://pypi.python.org/pypi/zopeskel.dexterity">zopeskel.dexterity</a>, don&#8217;t worry though.
I checked in a fix for this issue this morning, correcting the widget to
be used. You&#8217;ll need to use the latest version from the Plone Collective
<span class="caps">SVN</span> to make the templates work&nbsp;correctly.</p>
<p>On the other hand, you could look at <a class="reference external" href="http://pypi.python.org/pypi/collective.z3cform.datepicker">collective.z3cform.datepicker</a>,
which implements a much more user-friendly Date and DateTime widgets
(using jQuery <span class="caps">UI</span>&nbsp;etc).</p>
<p>There are <a href="http://davidjb.com/blog/2010/06/plone-dexterity-and-incorrect-widgets/#disqus_thread">comments</a>.</p>                </article>
                            </aside><!-- /#featured -->
                            <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">
                                                

                 
                        <li><article class="hentry">    
                <header>
                    <h1><a href="http://davidjb.com/blog/2010/04/plone-and-dexterity-working-with-computed-fields/" rel="bookmark"
                           title="Permalink to Plone and Dexterity: Working with computed fields">Plone and Dexterity: Working with computed&nbsp;fields</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2010-04-19T14:03:00">
                Mon 19 April 2010
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="http://davidjb.com/author/davidjb.html">davidjb</a>
        </address>
        <p>In <a href="http://davidjb.com/category/plon.html">Plon</a>. </p>
<p>tags: <a href="http://davidjb.com/tag/computation.html">computation</a><a href="http://davidjb.com/tag/content.html">content</a><a href="http://davidjb.com/tag/dexterity.html">dexterity</a><a href="http://davidjb.com/tag/extension.html">extension</a><a href="http://davidjb.com/tag/function.html">function</a><a href="http://davidjb.com/tag/plone.html">plone</a><a href="http://davidjb.com/tag/product.html">product</a><a href="http://davidjb.com/tag/python.html">python</a></p>
</footer><!-- /.post-info -->                <p>Today, we&#8217;re looking at how to utilise computed fields within a
Dexterity-based content type. The specific use-case is that of having
two separate fields (first name and surname, for a Person type, for
example) generate the complete object title. The first part of this &#8212;
having the title of the ...</p>
                <a class="readmore" href="http://davidjb.com/blog/2010/04/plone-and-dexterity-working-with-computed-fields/">read more</a>
                <p>There are <a href="http://davidjb.com/blog/2010/04/plone-and-dexterity-working-with-computed-fields/#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
                            

                 
                        <li><article class="hentry">    
                <header>
                    <h1><a href="http://davidjb.com/blog/2010/03/plonezope-utilising-zope-testrecorder-for-unit-testing/" rel="bookmark"
                           title="Permalink to Plone/Zope: Utilising zope.testrecorder for unit testing">Plone/Zope:  Utilising zope.testrecorder for unit&nbsp;testing</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2010-03-25T09:40:00">
                Thu 25 March 2010
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="http://davidjb.com/author/davidjb.html">davidjb</a>
        </address>
        <p>In <a href="http://davidjb.com/category/plone.html">Plone</a>. </p>
<p>tags: <a href="http://davidjb.com/tag/buildout.html">buildout</a><a href="http://davidjb.com/tag/install.html">install</a><a href="http://davidjb.com/tag/plone.html">plone</a><a href="http://davidjb.com/tag/product.html">product</a><a href="http://davidjb.com/tag/recorder.html">recorder</a><a href="http://davidjb.com/tag/test.html">test</a><a href="http://davidjb.com/tag/unit-tests.html">unit tests</a><a href="http://davidjb.com/tag/zope.html">zope</a></p>
</footer><!-- /.post-info -->                <p>Writing unit tests (especial doctests) for your Plone product is
reasonably time consuming. For us developers, having tested code is
absolutely essential. This is especially true when clients are beating
down your door looking for a fully functional product and you need to
know what you&#8217;ve written works and ...</p>
                <a class="readmore" href="http://davidjb.com/blog/2010/03/plonezope-utilising-zope-testrecorder-for-unit-testing/">read more</a>
                <p>There are <a href="http://davidjb.com/blog/2010/03/plonezope-utilising-zope-testrecorder-for-unit-testing/#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
                            

                 
                        <li><article class="hentry">    
                <header>
                    <h1><a href="http://davidjb.com/blog/2009/09/ploneformgen-plone-google-calendar-integration/" rel="bookmark"
                           title="Permalink to PloneFormGen (Plone) & Google Calendar Integration">PloneFormGen (Plone) <span class="amp">&amp;</span> Google Calendar&nbsp;Integration</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2009-09-22T10:40:00">
                Tue 22 September 2009
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="http://davidjb.com/author/davidjb.html">davidjb</a>
        </address>
        <p>In <a href="http://davidjb.com/category/plone.html">Plone</a>. </p>
<p>tags: <a href="http://davidjb.com/tag/calendar.html">calendar</a><a href="http://davidjb.com/tag/form.html">form</a><a href="http://davidjb.com/tag/gen.html">gen</a><a href="http://davidjb.com/tag/google.html">google</a><a href="http://davidjb.com/tag/mash.html">mash</a><a href="http://davidjb.com/tag/pfg.html">pfg</a><a href="http://davidjb.com/tag/plone.html">plone</a><a href="http://davidjb.com/tag/product.html">product</a><a href="http://davidjb.com/tag/python.html">python</a><a href="http://davidjb.com/tag/script.html">script</a></p>
</footer><!-- /.post-info -->                <p>It&#8217;s a little bit of a different mash-up, but it&#8217;s still nonetheless
useful to have, given types of booking forms and so forth that could
utilise it.&nbsp; The easiest way I found (to avoid security issues with
Python scripts in Plone) was to create an external method and ...</p>
                <a class="readmore" href="http://davidjb.com/blog/2009/09/ploneformgen-plone-google-calendar-integration/">read more</a>
                <p>There are <a href="http://davidjb.com/blog/2009/09/ploneformgen-plone-google-calendar-integration/#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
                            

                 
                        <li><article class="hentry">    
                <header>
                    <h1><a href="http://davidjb.com/blog/2009/08/plone-re-ordering-viewlets/" rel="bookmark"
                           title="Permalink to Plone: Re-ordering Viewlets">Plone: Re-ordering&nbsp;Viewlets</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2009-08-19T16:34:00">
                Wed 19 August 2009
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="http://davidjb.com/author/davidjb.html">davidjb</a>
        </address>
        <p>In <a href="http://davidjb.com/category/plone.html">Plone</a>. </p>
<p>tags: <a href="http://davidjb.com/tag/genericsetup.html">genericsetup</a><a href="http://davidjb.com/tag/plone.html">plone</a><a href="http://davidjb.com/tag/product.html">product</a><a href="http://davidjb.com/tag/programming.html">programming</a><a href="http://davidjb.com/tag/theme.html">theme</a></p>
</footer><!-- /.post-info -->                <p>Just responded to a post on the Plone Nabble forums (<a class="reference external" href="http://n2.nabble.com/reordering-portal-globalnav--tp3470440p3470440.html">here</a>) about how
to re-order viewlets.&nbsp; In particular, this one is little different (but
not terribly so) because the original poster wanted to put the
breadcrumbs above the global sections (global tabs in Plone).&nbsp; Normally,
this is straight forward because ...</p>
                <a class="readmore" href="http://davidjb.com/blog/2009/08/plone-re-ordering-viewlets/">read more</a>
                <p>There are <a href="http://davidjb.com/blog/2009/08/plone-re-ordering-viewlets/#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
                            

                 
                        <li><article class="hentry">    
                <header>
                    <h1><a href="http://davidjb.com/blog/2009/08/creating-distributing-a-new-plonepypi-product/" rel="bookmark"
                           title="Permalink to Creating & distributing a new Plone/PyPI product">Creating <span class="amp">&amp;</span> distributing a new Plone/PyPI&nbsp;product</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2009-08-17T10:01:00">
                Mon 17 August 2009
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="http://davidjb.com/author/davidjb.html">davidjb</a>
        </address>
        <p>In <a href="http://davidjb.com/category/python.html">Python</a>. </p>
<p>tags: <a href="http://davidjb.com/tag/easy_install.html">easy_install</a><a href="http://davidjb.com/tag/open-source.html">open source</a><a href="http://davidjb.com/tag/plone.html">plone</a><a href="http://davidjb.com/tag/product.html">product</a><a href="http://davidjb.com/tag/python.html">python</a><a href="http://davidjb.com/tag/release.html">release</a><a href="http://davidjb.com/tag/software.html">Software</a></p>
</footer><!-- /.post-info -->                <p>It&#8217;s amazing to see how technologies can be so smoothly integrated these
days.&nbsp; I&#8217;m talking, at least in this instance, about how setuptools
works with PyPI (and then Plone.org&#8217;s Products section) and allows you
to distribute your product(s) to the world.&nbsp; So far, I&#8217;ve ...</p>
                <a class="readmore" href="http://davidjb.com/blog/2009/08/creating-distributing-a-new-plonepypi-product/">read more</a>
                <p>There are <a href="http://davidjb.com/blog/2009/08/creating-distributing-a-new-plonepypi-product/#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
                            

                 
                        <li><article class="hentry">    
                <header>
                    <h1><a href="http://davidjb.com/blog/2008/11/plone-relative-recent-changes-portlets/" rel="bookmark"
                           title="Permalink to Plone: Relative ‘Recent Changes’ Portlets">Plone: Relative &#8216;Recent Changes&#8217;&nbsp;Portlets</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2008-11-20T11:33:00">
                Thu 20 November 2008
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="http://davidjb.com/author/davidjb.html">davidjb</a>
        </address>
        <p>In <a href="http://davidjb.com/category/plone.html">Plone</a>. </p>
<p>tags: <a href="http://davidjb.com/tag/features.html">features</a><a href="http://davidjb.com/tag/plone.html">plone</a><a href="http://davidjb.com/tag/portlets.html">portlets</a><a href="http://davidjb.com/tag/product.html">product</a><a href="http://davidjb.com/tag/python.html">python</a></p>
</footer><!-- /.post-info -->                <p>The problem I&#8217;ve been faced with today on our Plone systems is that I
need to created a &#8216;Recent Changes&#8217; portlet that&#8217;s relative to where the
user is on the&nbsp;site.</p>
<p>Now, the standard portlet doesn&#8217;t do anything for me, so that&#8217;s pretty
useless. I had ...</p>
                <a class="readmore" href="http://davidjb.com/blog/2008/11/plone-relative-recent-changes-portlets/">read more</a>
                <p>There are <a href="http://davidjb.com/blog/2008/11/plone-relative-recent-changes-portlets/#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
                            </ol><!-- /#posts-list -->
                            <p class="paginator">
        Page 1 / 1
    </p>
                        </section><!-- /#content -->
                    <section id="extras" class="body">
                        <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                                                    <li><a href="http://planet.plone.org">Planet Plone</a></li>
                                                    <li><a href="http://jcu.me">jcu.me Research Porfolio</a></li>
                                                    <li><a href="http://xckd.com">XKCD</a></li>
                                                    <li><a href="http://appleinsider.com/">Apple Insider</a></li>
                                                    <li><a href="http://git.io/djb">Latest coding activity</a></li>
                                                    <li><a href="http://www.ozbargain.com.au">OzBargain</a></li>
                                                </ul>
                </div><!-- /.blogroll -->
                                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="http://davidjb.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>
                            
                                                    <li><a href="http://git.io/djb">GitHub</a></li>
                                                    <li><a href="http://twitter.com/davidjb_">Twitter</a></li>
                                                    <li><a href="http://linkedin.com/in/davidbeitey">LinkedIn</a></li>
                                                    <li><a href="http://facebook.com/david.beitey">Facebook</a></li>
                                                    <li><a href="https://plus.google.com/u/0/106527454335411502430">Google+</a></li>
                                                </ul>
                </div><!-- /.social -->
                </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-24253455-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
<script type="text/javascript">
    var disqus_shortname = 'davidjb';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>