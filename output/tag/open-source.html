<!DOCTYPE html>
<html lang="en">
<head>
        <title>DavidJB.com - open source</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="../theme/css/main.css" type="text/css" />
                <link href="http://davidjb.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="DavidJB.com Atom Feed" />
                
        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../css/ie.css"/>
                <script src="../js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="../">DavidJB.com  <strong>Ramblings about Plone, Pyramid, Python, the web, Linux, roses and more.</strong></a></h1>
                <nav><ul>
                                                    <li><a href="../pages/about-me.html">About me</a></li>
                                    <li><a href="../pages/blog.html">Blog</a></li>
                                    <li><a href="../pages/projects.html">Projects</a></li>
                                                                </ul></nav>
        </header><!-- /#banner -->
                
            

                            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="../blog/2009/08/creating-distributing-a-new-plonepypi-product/">Creating &amp; distributing a new Plone/PyPI product</a></h1> 
                    <footer class="post-info">
        <abbr class="published" title="2009-08-17T10:01:00">
                Mon 17 August 2009
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="../author/davidjb.html">davidjb</a>
        </address>
        <p>In <a href="../category/python.html">Python</a>. </p>
<p>tags: <a href="../tag/easy_install.html">easy_install</a><a href="../tag/open-source.html">open source</a><a href="../tag/plone.html">plone</a><a href="../tag/product.html">product</a><a href="../tag/python.html">python</a><a href="../tag/release.html">release</a><a href="../tag/software.html">Software</a></p>
</footer><!-- /.post-info --><p>It's amazing to see how technologies can be so smoothly integrated these
days.&nbsp; I'm talking, at least in this instance, about how setuptools
works with PyPI (and then Plone.org's Products section) and allows you
to distribute your product(s) to the world.&nbsp; So far, I've just got the
one -- collective.portlet.googleapps -- but I'm sure time will pass and
I'll have some more useful things to contribute. Here's a summary of
what I did:</p>
<ol class="arabic">
<li><p class="first">Create the product.&nbsp; ZopeSkel is a wonderful help here for Plone
products. [I lie a little bit in my code example, because sadly, the
plone3_portlet template doesn't have nesting.&nbsp; I cheated by using
the Archetypes template and copied in my portlet code &amp; repeated to
create multiple portlets in one product]:</p>
<pre class="code bash literal-block">
easy_install-2.4 ZopeSkel
paster2.4 create --list-templates
paster2.4 create -t plone3_portlet collective.portlet.googleapps
</pre>
</li>
<li><p class="first">Upload it to some relevant code repository.&nbsp; I've used the Plone
collective SVN (and <a class="reference external" href="http://plone.org/documentation/how-to/create-a-new-project-in-the-plone-collective">this guide</a>):</p>
<pre class="code bash literal-block">
svn mkdir https://svn.plone.org/svn/collective/collective.portlet.googleapps -m <span class="s1">'Created new project'</span>
svn mkdir https://svn.plone.org/svn/collective/collective.portlet.googleapps/<span class="o">{</span>trunk,branches,tags<span class="o">}</span> -m <span class="s1">'Added base files'</span>
svn co https://svn.plone.org/svn/collective/collective.portlet.googleapps/trunk collective.portlet.googleapps
<span class="o">[</span>copy stuff into the folder<span class="o">]</span>
svn ci
</pre>
</li>
<li><p class="first">Do some work.&nbsp; When you're happy, make a tag for the relevant release
version:</p>
<pre class="code bash literal-block">
svn copy https://svn.plone.org/svn/collective/collective.portlet.googleapps/trunk https://svn.plone.org/svn/collective/collective.portlet.googleapps/tags/0.1
</pre>
</li>
<li><p class="first"><a class="reference external" href="http://pypi.python.org/pypi?%3Aaction=register_form">Sign up for PyPI</a> (Python Package Index), <a class="reference external" href="http://www.dewinter.com/gnupg_howto/english/GPGMiniHowto-3.html">generate a GPG
key</a>, and add the key ID to your account profile page.&nbsp; Your key ID
can be found on this line after generation:</p>
<pre class="literal-block">
gpg: key XXXXXXXX marked as ultimately trusted
</pre>
<p>or otherwise through <strong>gpg --list-keys</strong></p>
</li>
<li><p class="first"><a class="reference external" href="http://plone.org/join_form?came_from=http%3A//plone.org">Sign up</a> for an account on Plone.org to allow you to upload your
product here too.&nbsp; Make sure you follow the URL you get emailed and
change your password.</p>
</li>
<li><p class="first">Edit your ~/.pypirc file to include the following details from <a class="reference external" href="http://plone.org/documentation/tutorial/how-to-upload-your-package-to-plone.org/tutorial-all-pages">this
page</a>.&nbsp; My file also needed the <strong>server-login</strong> section (something
to do with differences between PyPI and Plone.org, I think).:</p>
<pre class="code ini literal-block">
<span class="k">[server-login]</span>
<span class="err">username:XXX</span>
<span class="err">password:YYY</span>
</pre>
</li>
<li><p class="first">When ready, you can upload your work to PyPI and Plone.org:</p>
<pre class="code bash literal-block">
easy_install-2.4 collective.dist
python2.4 setup.py register sdist bdist_egg upload -s
python2.4 setup.py mregister sdist mupload -r plone.org
</pre>
</li>
<li><p class="first">If everything goes according to plan, then you should see 'Response
200' back from the servers.&nbsp; If not, then check the following:</p>
<ol class="arabic simple">
<li>Your passwords and user names are correct in your <tt class="docutils literal"><span class="pre">~/.pypirc</span></tt> file
(yes, it's true, they're plaintext...)</li>
<li>Make sure your accounts on both PyPI and Plone.org are active and
actually exist.</li>
<li>You've followed any further instructions about troubleshooting on
the links I've posted.</li>
</ol>
</li>
<li><p class="first">Once done, you should be able to see your package on PyPI (and
administrate it once logged in), and see your product on Plone.org.
Keep in mind that Plone.org has an approval process that you'll have
to wait for before your product is fully visible.</p>
</li>
</ol>
<p>There are <a href="../blog/2009/08/creating-distributing-a-new-plonepypi-product/#disqus_thread">comments</a>.</p>                </article>
                                    <p class="paginator">
        Page 1 / 1
    </p>
                            </aside><!-- /#featured -->
                                                </ol><!-- /#posts-list -->
                        </section><!-- /#content -->
                    <section id="extras" class="body">
                        <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                                                    <li><a href="http://planet.plone.org">Planet Plone</a></li>
                                                    <li><a href=""></a></li>
                                                    <li><a href=""></a></li>
                                                </ul>
                </div><!-- /.blogroll -->
                                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="http://davidjb.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>
                            
                                                    <li><a href="http://git.io/djb">GitHub</a></li>
                                                    <li><a href="http://twitter.com/davidjb_">Twitter</a></li>
                                                    <li><a href="http://linkedin.com/in/davidbeitey">LinkedIn</a></li>
                                                    <li><a href="http://facebook.com/david.beitey">Facebook</a></li>
                                                    <li><a href="https://plus.google.com/u/0/106527454335411502430">Google+</a></li>
                                                </ul>
                </div><!-- /.social -->
                </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-24253455-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
<script type="text/javascript">
    var disqus_shortname = 'davidjb';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>