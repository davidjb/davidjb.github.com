<!DOCTYPE html>
<html lang="en">
<head>
        <title>Plone/Zope: Utilising zope.testrecorder for unit testing</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="../../../../theme/css/main.css" type="text/css" />
                <link href="http://davidjb.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="DavidJB.com Atom Feed" />
                
        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../../../../css/ie.css"/>
                <script src="../../../../js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../../../../css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="../../../../">DavidJB.com  <strong>Ramblings about Plone, Pyramid, Python, the web, Linux, roses and more.</strong></a></h1>
                <nav><ul>
                                                    <li><a href="../../../../pages/about-me.html">About&nbsp;me</a></li>
                                    <li><a href="../../../../pages/blog.html">Blog</a></li>
                                    <li><a href="../../../../pages/projects.html">Projects</a></li>
                                                                </ul></nav>
        </header><!-- /#banner -->
        <section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="../../../../blog/2010/03/plonezope-utilising-zope-testrecorder-for-unit-testing/" rel="bookmark"
           title="Permalink to Plone/Zope: Utilising zope.testrecorder for unit testing">Plone/Zope:  Utilising zope.testrecorder for unit&nbsp;testing</a></h1>
      <a href="http://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="davidjb_">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
    </header>

    <div class="entry-content">
      <footer class="post-info">
        <abbr class="published" title="2010-03-25T09:40:00">
                Thu 25 March 2010
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="../../../../author/davidjb.html">davidjb</a>
        </address>
        <p>In <a href="../../../../category/plone.html">Plone</a>. </p>
<p>tags: <a href="../../../../tag/buildout.html">buildout</a><a href="../../../../tag/install.html">install</a><a href="../../../../tag/plone.html">plone</a><a href="../../../../tag/product.html">product</a><a href="../../../../tag/recorder.html">recorder</a><a href="../../../../tag/test.html">test</a><a href="../../../../tag/unit-tests.html">unit tests</a><a href="../../../../tag/zope.html">zope</a></p>
</footer><!-- /.post-info -->      <p>Writing unit tests (especial doctests) for your Plone product is
reasonably time consuming. For us developers, having tested code is
absolutely essential. This is especially true when clients are beating
down your door looking for a fully functional product and you need to
know what you&#8217;ve written works and isn&#8217;t going to fall over (just yet,
anyway). Web apps are able to be tested using a multitude of frameworks,
and whilst not the most fully featured (eg lacking Javascript support),
Zope&#8217;s doctest machinery is right there within your Plone product. In
order to write these, enter zope.testrecorder to more-or-less automate
replicating your actions into&nbsp;tests.</p>
<p>zope.testrecorder is simple to install: just add it to your eggs list
under your buildout&#8217;s relevant instance section, and also the
corresponding zcml list too. Re-run your buildout and you will now have
the latest version of the package&nbsp;installed.</p>
<p>There&#8217;s some good documentation out there about this, such as <a class="reference external" href="http://plone.org/documentation/kb/testing/zope-testrecorder">Martin
Aspeli&#8217;s article</a> on plone.org, but it&#8217;s slightly dated given latest
updates with the package. Essentially, everything is relevant with the
exception of how to actually access the test recorder now. Enter
<a class="reference external" href="http://pyyou.wordpress.com/2008/04/11/how-to-install-zopetestrecorder-with-buildout/">PyYou&#8217;s post</a> about this same topic. Thanks to that article I now know
you should go to
<strong>http://zopehost:port/++resource++recorder/index.html</strong> to access the
test recorder, and not try and add an object in the root of Zope (or&nbsp;elsewhere).</p>
<p>Aside from that, the recorder works like a charm. You input the address
of what site (it can be anything or anywhere) you want to test and click
the &#8216;Go&#8217; button. Everything you do (mostly) gets monitored and recorded.
A few words to the wise&nbsp;though:</p>
<ul class="simple">
<li>No testing or recording Javascript-based or centric actions.&nbsp; So
don&#8217;t expect that product you wrote with the Google Maps <span class="caps">API</span> to work
so well with recording tests.&nbsp; Or, don&#8217;t expect the test recorder to
understand correctly that you clicking on the &#8216;Add New&#8230;&#8217; menu in
Plone isn&#8217;t actually a real&nbsp;link.</li>
<li>No ability to just browse with Javascript turned off.&nbsp; Essentially,
as the zope.testrecorder itself needs Javascript to run, you can&#8217;t
turn it off, thinking you&#8217;ll record things correctly, or at all.
Maybe there&#8217;s a way around this issue, but it&#8217;s likely more
complicated than I care to concern myself&nbsp;with.</li>
<li>Specialised form widgets are problematic.&nbsp; The Plone visual editor is
one (Javascript, again), but does work if you switch the editor to be
<span class="caps">HTML</span> before saving a form.&nbsp; Another example that will require some
fancy work around is z3c.relationfield &#8212; there&#8217;s no non-Javascript
fall back here (that I can&nbsp;see).</li>
<li>You&#8217;ll need to manually intervene with the rendered tests and fix
some things up.&nbsp; For example, testing the default title of a Plone
site doesn&#8217;t work because there&#8217;s a hyphen in the title.&nbsp; It&#8217;s a
special character and thus saved &#8220;incorrectly&#8221; within the&nbsp;doctests.</li>
</ul>
<p>Aside from all that, most of the heavy lifting is done for you, so
cheers to the creators of zope.testrecorder for making my life just that
bit&nbsp;easier.</p>

    </div><!-- /.entry-content -->
        <div class="comments">
      <h2>Comments !</h2>
      <div id="disqus_thread"></div>
      <script type="text/javascript">
        var disqus_identifier = "blog/2010/03/plonezope-utilising-zope-testrecorder-for-unit-testing/";
        var disqus_url = "../../../../blog/2010/03/plonezope-utilising-zope-testrecorder-for-unit-testing/";
        (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://davidjb.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>
    </div>
    
  </article>
</section>
        <section id="extras" class="body">
                        <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                                                    <li><a href="http://planet.plone.org">Planet Plone</a></li>
                                                    <li><a href=""></a></li>
                                                    <li><a href=""></a></li>
                                                </ul>
                </div><!-- /.blogroll -->
                                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="http://davidjb.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>
                            
                                                    <li><a href="http://git.io/djb">GitHub</a></li>
                                                    <li><a href="http://twitter.com/davidjb_">Twitter</a></li>
                                                    <li><a href="http://linkedin.com/in/davidbeitey">LinkedIn</a></li>
                                                    <li><a href="http://facebook.com/david.beitey">Facebook</a></li>
                                                    <li><a href="https://plus.google.com/u/0/106527454335411502430">Google+</a></li>
                                                </ul>
                </div><!-- /.social -->
                </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-24253455-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
<script type="text/javascript">
    var disqus_shortname = 'davidjb';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>