<!DOCTYPE html>
<html lang="en">
<head>
        <title>Deliverance, Plone, and tags</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="../../../../theme/css/main.css" type="text/css" />
                <link href="http://davidjb.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="DavidJB.com Atom Feed" />
                
        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../../../../css/ie.css"/>
                <script src="../../../../js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../../../../css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="../../../../">DavidJB.com  <strong>Ramblings about Plone, Pyramid, Python, the web, Linux, roses and more.</strong></a></h1>
                <nav><ul>
                                                    <li><a href="../../../../pages/about-me.html">About me</a></li>
                                    <li><a href="../../../../pages/blog.html">Blog</a></li>
                                    <li><a href="../../../../pages/projects.html">Projects</a></li>
                                                                </ul></nav>
        </header><!-- /#banner -->
        <section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="../../../../blog/2009/11/deliverance-plone-and-tags/" rel="bookmark"
           title="Permalink to Deliverance, Plone, and tags">Deliverance, Plone, and  tags</a></h1>
      <a href="http://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="davidjb_">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
    </header>

    <div class="entry-content">
      <footer class="post-info">
        <abbr class="published" title="2009-11-27T15:17:00">
                Fri 27 November 2009
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="../../../../author/davidjb.html">davidjb</a>
        </address>
        <p>In <a href="../../../../category/plone.html">Plone</a>. </p>
<p>tags: <a href="../../../../tag/deliverance.html">deliverance</a><a href="../../../../tag/element.html">element</a><a href="../../../../tag/plone.html">plone</a><a href="../../../../tag/problem.html">problem</a><a href="../../../../tag/theme.html">theme</a><a href="../../../../tag/themeing.html">themeing</a><a href="../../../../tag/xml.html">xml</a></p>
</footer><!-- /.post-info -->      <p>It's been a little bit of time since my last post, and who can blame me
with my site having been down for almost 2 full days over the last
week!&nbsp; I'm not paying that much for the webspace, thankfully, but if I
was, I'd be seeing red over it.&nbsp; Apparently some patch for MySQL broke
everything; imagine how it looked to see my site with a '500 internal
error' plastered all over it and not being able to access my cPanel.
Ugh.</p>
<p>Anyway, everything's back again, assuming that you can see this.&nbsp; Okay?
Great!</p>
<p>Today's conundrum presented itself very, very strangely.&nbsp; People
couldn't change their password in Plone (which effectively breaks
registration if a user has to select a password).&nbsp; The Plone site we
have was being themed by Deliverance. A colleague and I were taking a
look at this earlier in the week and from everything that we could see,
the request traffic and variables were being sent onto Plone correctly
from Deliverance. That said, the issue persisted.</p>
<p>The issue ended up being a missing &lt;base&gt; tag in the page's HTML &lt;head&gt;
tag. Since this &lt;base&gt; tag controls relative links on any given page, I
guess that the resulting request/etc for password selection must have
been affected.&nbsp; I've seen some pretty whacked out things happen without
that base tag, including bad relative links (the obvious problem),
missing menus on content (another issue relating to an old blog post)
etc.</p>
<p>Essentially, Deliverance doesn't bring the &lt;base&gt; tag across by default,
as it doesn't know any better. That said, putting these new elements:</p>
<pre class="code xml literal-block">
<span class="nt">&lt;replace</span> <span class="na">content=</span><span class="s">&quot;/html/head/base&quot;</span> <span class="na">theme=</span><span class="s">&quot;/html/head/base&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;append</span> <span class="na">content=</span><span class="s">&quot;/html/head/base&quot;</span> <span class="na">theme=</span><span class="s">&quot;children:/html/head&quot;</span> <span class="nt">/&gt;</span>
</pre>
<p>in the deliverance.xml configuration solved the problem.&nbsp; Depending on
your theme, you might want just one of the lines as it says &quot;replace my
&lt;base&gt; tag in theme with the one from the page&quot; and falls back to
&quot;append the base tag into the theme&quot;.&nbsp; Thanks the tag being moved with
the first command, the 2nd doesn't happen if the base tag is already
gone from the content.</p>
<p><em>phew</em> That was confusing; hopefully it helps someone out!</p>

    </div><!-- /.entry-content -->
        <div class="comments">
      <h2>Comments !</h2>
      <div id="disqus_thread"></div>
      <script type="text/javascript">
        var disqus_identifier = "blog/2009/11/deliverance-plone-and-tags/";
        var disqus_url = "../../../../blog/2009/11/deliverance-plone-and-tags/";
        (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://davidjb.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>
    </div>
    
  </article>
</section>
        <section id="extras" class="body">
                        <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                                                    <li><a href="http://planet.plone.org">Planet Plone</a></li>
                                                    <li><a href=""></a></li>
                                                    <li><a href=""></a></li>
                                                </ul>
                </div><!-- /.blogroll -->
                                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="http://davidjb.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>
                            
                                                    <li><a href="http://git.io/djb">GitHub</a></li>
                                                    <li><a href="http://twitter.com/davidjb_">Twitter</a></li>
                                                    <li><a href="http://linkedin.com/in/davidbeitey">LinkedIn</a></li>
                                                    <li><a href="http://facebook.com/david.beitey">Facebook</a></li>
                                                    <li><a href="https://plus.google.com/u/0/106527454335411502430">Google+</a></li>
                                                </ul>
                </div><!-- /.social -->
                </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-24253455-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
<script type="text/javascript">
    var disqus_shortname = 'davidjb';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>